# ========================================
# TeleCuidar - Environment Configuration
# ========================================
# Copie este arquivo para .env e configure os valores apropriados
# IMPORTANTE: Nunca commite o arquivo .env com valores reais
#
# Este é o ÚNICO arquivo de configuração do projeto.
# Todos os outros arquivos (appsettings.json, environment.ts, docker-compose)
# leem as configurações deste arquivo.
# ========================================

# ========================================
# GERAL
# ========================================
NODE_ENV=development
ASPNETCORE_ENVIRONMENT=Development
TZ=America/Sao_Paulo

# ========================================
# BACKEND - API
# ========================================
# URL base da API (usado pelo frontend)
API_URL=http://localhost:5239/api

# Porta do backend (desenvolvimento local)
BACKEND_PORT=5239

# Porta interna do backend no Docker
BACKEND_INTERNAL_PORT=5000

# ========================================
# BANCO DE DADOS
# ========================================
# SQLite (padrão)
DB_CONNECTION_STRING=Data Source=telecuidar.db

# Para Docker, use caminho absoluto:
# DB_CONNECTION_STRING=Data Source=/app/data/telecuidar.db

# Para migração futura para outros bancos:
# DB_PROVIDER=SQLite
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=telecuidar
# DB_USER=telecuidar_user
# DB_PASSWORD=your_secure_password

# ========================================
# JWT - AUTENTICAÇÃO
# ========================================
# IMPORTANTE: Gere uma chave secreta forte e única para produção
# Use: openssl rand -base64 64
JWT_SECRET_KEY=TelecuidarSecretKey2024SuperSecureKey!@#$%ChangeThisInProduction
JWT_ISSUER=TelecuidarAPI
JWT_AUDIENCE=TelecuidarClient
JWT_EXPIRATION_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRATION_DAYS=7

# ========================================
# CORS - CROSS-ORIGIN
# ========================================
# URLs permitidas para fazer requisições (separadas por vírgula)
# Use * para permitir qualquer origem em desenvolvimento
CORS_ALLOWED_ORIGINS=*

# ========================================
# FILE STORAGE - UPLOAD DE ARQUIVOS
# ========================================
FILE_UPLOAD_PATH=uploads
FILE_MAX_SIZE_MB=50
FILE_ALLOWED_EXTENSIONS=.pdf,.doc,.docx,.jpg,.jpeg,.png,.txt,.gif,.webp

# ========================================
# EMAIL - CONFIGURAÇÃO DE ENVIO
# ========================================
# Para funcionalidades de recuperação de senha e verificação de email
EMAIL_ENABLED=true
EMAIL_SMTP_HOST=smtp.hostinger.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=contato@telecuidar.com.br
EMAIL_SMTP_PASSWORD=your_email_password
EMAIL_FROM_NAME=TeleCuidar
EMAIL_FROM_ADDRESS=contato@telecuidar.com.br
EMAIL_USE_SSL=true

# ========================================
# FRONTEND - ANGULAR
# ========================================
FRONTEND_PORT=4200
FRONTEND_HOST=0.0.0.0
FRONTEND_URL=http://localhost:4200

# Porta interna do frontend no Docker (SSR)
FRONTEND_INTERNAL_PORT=4000

# ========================================
# SEED DATA - DADOS INICIAIS
# ========================================
# Credenciais do primeiro admin (criado no seed)
SEED_ADMIN_EMAIL=adm@adm.com
SEED_ADMIN_PASSWORD=zxcasd12
SEED_ADMIN_NAME=Admin
SEED_ADMIN_LASTNAME=Sistema
SEED_ADMIN_CPF=00000000000

# Habilitar seed automático ao iniciar
SEED_DATA_ENABLED=true

# ========================================
# SEGURANÇA
# ========================================
# Habilitar HTTPS redirect (desabilitar em desenvolvimento local)
ENABLE_HTTPS_REDIRECT=false

# Rate limiting (requisições por período)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_API=10
RATE_LIMIT_REQUESTS_GENERAL=30
RATE_LIMIT_PERIOD_SECONDS=1

# Conexões simultâneas por IP
MAX_CONNECTIONS_API=10
MAX_CONNECTIONS_GENERAL=20

# ========================================
# LOGGING
# ========================================
LOG_LEVEL=Information
LOG_LEVEL_ASPNET=Warning
LOG_TO_FILE=false
LOG_FILE_PATH=logs/telecuidar.log

# ========================================
# AI - Configuração de IA
# ========================================
AI_ENABLED=true
AI_API_KEY=your_api_key_here
AI_API_URL=https://api.deepseek.com/v1/chat/completions
AI_MODEL=deepseek-chat
AI_TIMEOUT_SECONDS=120

# ========================================
# JITSI MEET - VIDEOCHAMADA SELF-HOSTED
# ========================================
# Habilitar sistema de videochamada
JITSI_ENABLED=true

# Versão da imagem Docker do Jitsi
JITSI_IMAGE_TAG=stable-9753

# ----------------------------------------
# DOMÍNIO DO JITSI
# ----------------------------------------
# Para PRODUÇÃO: meet.telecuidar.com.br (Nginx faz proxy na porta 443)
# Para DESENVOLVIMENTO LOCAL: localhost:8443 (acesso direto ao container)
# Para acesso via rede local, use o IP da máquina: 192.168.15.2:8443
# Ou deixe localhost:8443 e habilite JITSI_DYNAMIC_DOMAIN=true
JITSI_DOMAIN=localhost:8443

# Habilitar domínio dinâmico (usa o host da requisição em vez do JITSI_DOMAIN fixo)
# Útil para desenvolvimento quando acessa de localhost ou IP local
JITSI_DYNAMIC_DOMAIN=true

# URL pública do Jitsi (com protocolo)
# Para PRODUÇÃO: https://meet.telecuidar.com.br (SEM porta - Nginx proxy na 443)
# Para DESENVOLVIMENTO LOCAL: https://localhost:8443
# Com JITSI_DYNAMIC_DOMAIN=true, este valor é ignorado em dev
JITSI_PUBLIC_URL=https://localhost:8443

# ID da aplicação (deve ser igual ao configurado no Prosody JWT)
JITSI_APP_ID=telecuidar

# Chave secreta para JWT (OBRIGATÓRIO para self-hosted seguro)
# IMPORTANTE: Gere uma chave forte: openssl rand -base64 64
# Esta chave deve ser a mesma no backend e no Prosody
JITSI_APP_SECRET=TelecuidarJitsiSecretKey2024LocalDevelopment!@#$%^&*()

# Se requer autenticação JWT (sempre true para self-hosted)
JITSI_REQUIRES_AUTH=true

# Tempo de expiração do token em minutos
JITSI_TOKEN_EXPIRATION_MINUTES=120

# Habilitar convidados (sem autenticação) - NÃO RECOMENDADO para produção
JITSI_ENABLE_GUESTS=0

# Habilitar autenticação obrigatória
JITSI_ENABLE_AUTH=1

# Porta do Jitsi Web (HTTPS)
JITSI_WEB_PORT=8443

# Porta UDP do JVB (Video Bridge)
JVB_PORT=10000

# Porta Colibri REST do JVB
JVB_COLIBRI_PORT=8080

# Servidor STUN do JVB
JVB_STUN_SERVERS=meet-jit-si-turnrelay.jitsi.net:443

# Desabilitar TCP Harvester
JVB_TCP_HARVESTER_DISABLED=true

# ========================================
# JITSI - SENHAS INTERNAS DOS COMPONENTES
# ========================================
# IMPORTANTE: Gere senhas fortes para cada componente em produção
# Use: openssl rand -hex 16
# Em desenvolvimento local, use os valores padrão abaixo

# Senha do componente Jicofo
JICOFO_AUTH_PASSWORD=s3cr3tjicofo

# Senha do componente Jicofo (secret)
JICOFO_COMPONENT_SECRET=s3cr3tcomponent

# Senha do JVB (Jitsi Video Bridge)
JVB_AUTH_PASSWORD=s3cr3tjvb

# ========================================
# JITSI - REDE
# ========================================
# IP público do servidor (OBRIGATÓRIO para produção)
# Em desenvolvimento local, deixe vazio
DOCKER_HOST_ADDRESS=

# ========================================
# CNS - Consulta Nacional de Saúde (CADSUS)
# ========================================
# Ambiente: 'producao' ou 'hmg' (homologação)
CNS_AMBIENTE=producao

# Caminho para o certificado digital A1 (.pfx)
# Windows: C:\\caminho\\para\\certificado.pfx
# Linux/Mac: /caminho/para/certificado.pfx
CNS_CERT_PATH=./certificado.pfx

# Senha do certificado digital
CNS_CERT_PASSWORD=

# ========================================
# MONITORAMENTO E ANALYTICS
# ========================================
ANALYTICS_ENABLED=false
ANALYTICS_TRACKING_ID=

# ----------------------------------------
# SENTRY - Error Tracking
# ----------------------------------------
SENTRY_ENABLED=false
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_RELEASE=

# ========================================
# CACHE E PERFORMANCE
# ========================================
CACHE_ENABLED=true
CACHE_EXPIRATION_MINUTES=30

# ========================================
# NGINX - PROXY REVERSO
# ========================================
# Portas expostas pelo Docker
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# Domínio da aplicação (usado no nginx e CORS)
APP_DOMAIN=localhost

# Habilitar SSL/HTTPS
SSL_ENABLED=false

# Caminhos dos certificados SSL (dentro do container)
SSL_CERTIFICATE=/etc/nginx/ssl/cert.pem
SSL_CERTIFICATE_KEY=/etc/nginx/ssl/key.pem

# ========================================
# DOCKER - CONFIGURAÇÕES
# ========================================
# Nome do projeto Docker (usado como prefixo nos containers)
COMPOSE_PROJECT_NAME=telecuidar

# Reiniciar containers automaticamente
DOCKER_RESTART_POLICY=unless-stopped

# ----------------------------------------
# HEALTHCHECK - Configurações de verificação de saúde
# ----------------------------------------
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_START_PERIOD=30s
HEALTHCHECK_RETRIES=3

# ========================================
# TESTES - CONFIGURAÇÕES
# ========================================
# URL base para testes E2E
TEST_BASE_URL=http://localhost:4200

# Timeout para testes (ms)
TEST_TIMEOUT=30000

# ========================================
# DESENVOLVIMENTO
# ========================================
# Habilitar Swagger
SWAGGER_ENABLED=true

# Mock de serviços externos
USE_MOCK_SERVICES=true

# Hot reload
WATCH_MODE=true
